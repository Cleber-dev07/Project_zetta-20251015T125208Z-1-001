<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes da Extensão - Project Zetta</title>
    <!-- Carregamento do Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuração do Tailwind para usar cores neon e fontes customizadas -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'neon-blue': '#00BFFF',
                        'neon-light': '#00DFFF',
                        'dark-bg': '#0A192F',
                        'darkest-bg': '#050E1A',
                        'highlight-orange': 'orange',
                    },
                    fontFamily: {
                        // Usando a fonte do seu projeto inicial para consistência
                        'rajdhani': ['Rajdhani', 'sans-serif'],
                        'inter': ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <!-- Carregamento de fontes -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;700&family=Inter:wght@400;700&display=swap');
        body {
            /* Fundo escuro total */
            background-color: black;
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for neon glow (Tailwind only provides limited shadow options) */
        .neon-shadow-blue {
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.7);
        }
        .neon-border-blue {
            border: 1px solid #00BFFF;
        }
    </style>
</head>
<body class="min-h-screen text-gray-100 p-4 md:p-8">

    <!-- Navbar/Header (Recreating the original style with Tailwind) -->
    <header id="main-header" class="bg-dark-bg neon-border-blue neon-shadow-blue p-3 md:p-4 mb-8 flex justify-between items-center rounded-lg max-w-7xl mx-auto">
        <div class="flex items-center">
            <h1 class="font-rajdhani text-neon-blue font-bold text-3xl md:text-4xl m-0">
                <span class="text-neon-light">P</span>roject
            </h1>
            <h1 class="font-rajdhani text-highlight-orange text-xl md:text-2xl mt-1 ml-2">Zetta</h1>
        </div>
        <a href="index.html" class="px-3 py-1 bg-highlight-orange text-dark-bg font-bold rounded-md hover:bg-yellow-400 transition">
            &larr; Início
        </a>
    </header>

    <main id="extension-container" class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8">

        <!-- Coluna Principal (2/3 da tela em desktop) -->
        <section id="main-details" class="lg:col-span-2 space-y-8">
            
            <!-- Detalhes da Extensão & Botão de Instalar -->
            <div id="extension-header" class="bg-dark-bg p-6 md:p-8 rounded-xl neon-border-blue neon-shadow-blue">
                <h2 id="extension-title" class="text-4xl md:text-5xl font-rajdhani font-bold text-neon-light mb-4">
                    Blur my Shell
                </h2>
                <div class="flex flex-col md:flex-row md:justify-between md:items-end">
                    <p id="extension-summary" class="text-lg text-gray-300 max-w-3xl">
                        Aplica um efeito de desfoque (blur) no painel superior do Gnome, na visão de atividades e no dash, seguindo o estilo visual moderno.
                    </p>
                    <button id="install-button"
                        class="mt-6 md:mt-0 px-8 py-3 bg-highlight-orange text-darkest-bg font-bold text-lg rounded-lg shadow-lg hover:bg-yellow-400 transition transform hover:scale-105"
                        onclick="showInstallationMessage()">
                        Instalar Extensão
                    </button>
                </div>

                <div class="mt-6 pt-4 border-t border-neon-blue/30 text-sm grid grid-cols-2 md:grid-cols-4 gap-4">
                    <p><strong>Versão:</strong> <span id="info-version" class="text-neon-light">V1.2.5</span></p>
                    <p><strong>Atualização:</strong> <span id="info-update" class="text-neon-light">15 Out, 2025</span></p>
                    <p><strong>Compatibilidade:</strong> <span id="info-compat" class="text-neon-light">Gnome 45</span></p>
                    <p><strong>Autor:</strong> <span id="info-author" class="text-neon-light">Ariel B.</span></p>
                    <p><strong>Classificação:</strong> <span id="info-rating" class="text-highlight-orange">4.8 / 5.0</span></p>
                </div>
            </div>

            <!-- Seção de Comentários (Mocked) -->
            <div class="bg-dark-bg p-6 md:p-8 rounded-xl neon-border-blue/50">
                <h3 class="text-2xl font-rajdhani font-bold text-white mb-6 border-b border-white/10 pb-2">Comentários (3)</h3>

                <div class="space-y-6">
                    <!-- Comentário 1 -->
                    <div class="border-l-4 border-neon-blue pl-4">
                        <p class="text-sm font-bold text-neon-light">Usuário123</p>
                        <p class="text-gray-300">"Melhor extensão de blur que usei até agora, o desempenho é surpreendentemente leve. Parabéns ao autor!"</p>
                        <span class="text-xs text-gray-500">Há 2 dias</span>
                    </div>
                    <!-- Comentário 2 -->
                    <div class="border-l-4 border-highlight-orange pl-4">
                        <p class="text-sm font-bold text-highlight-orange">DevMaster</p>
                        <p class="text-gray-300">"Ótima integração com as últimas versões do Gnome. O controle de opacidade é um diferencial."</p>
                        <span class="text-xs text-gray-500">Há 1 semana</span>
                    </div>

                    <!-- Formulário de Comentário (Mocked) -->
                    <div class="pt-4 border-t border-white/10">
                        <h4 class="text-white mb-2">Deixe seu Comentário</h4>
                        <textarea class="w-full p-3 bg-darkest-bg border border-neon-blue/50 rounded-md text-white placeholder-gray-500 focus:ring-1 focus:ring-neon-blue outline-none" rows="3" placeholder="Escreva sua opinião..."></textarea>
                        <button class="mt-3 px-4 py-2 bg-neon-blue text-darkest-bg font-bold rounded-md hover:bg-neon-light transition">
                            Enviar Comentário
                        </button>
                    </div>
                </div>
            </div>

        </section>

        <!-- Coluna Lateral (1/3 da tela em desktop) -->
        <section id="similar-extensions" class="lg:col-span-1 space-y-6">
            
            <!-- Extensões Similares -->
            <div class="bg-dark-bg p-6 rounded-xl neon-border-blue/50 neon-shadow-blue">
                <h3 class="text-2xl font-rajdhani font-bold text-white mb-4 border-b border-white/10 pb-2">Extensões Similares</h3>
                <ul id="similar-list" class="space-y-3">
                    <!-- Similar Item 1 -->
                    <li class="p-3 bg-darkest-bg rounded-lg hover:bg-neon-blue/10 transition neon-border-blue/20 cursor-pointer" onclick="loadExtensionDetails('dash_to_panel')">
                        <a href="#" class="font-bold text-neon-light hover:text-white">Dash to Panel</a>
                        <p class="text-sm text-gray-400">Combina o Dash e o Painel Superior em um único painel personalizável.</p>
                    </li>
                    <!-- Similar Item 2 -->
                    <li class="p-3 bg-darkest-bg rounded-lg hover:bg-neon-blue/10 transition neon-border-blue/20 cursor-pointer" onclick="loadExtensionDetails('user_themes')">
                        <a href="#" class="font-bold text-neon-light hover:text-white">User Themes</a>
                        <p class="text-sm text-gray-400">Permite carregar temas de shell instalados pelo usuário.</p>
                    </li>
                    <!-- Similar Item 3 -->
                    <li class="p-3 bg-darkest-bg rounded-lg hover:bg-neon-blue/10 transition neon-border-blue/20 cursor-pointer" onclick="loadExtensionDetails('tactile')">
                        <a href="#" class="font-bold text-neon-light hover:text-white">Tactile</a>
                        <p class="text-sm text-gray-400">Organizador de janelas baseado em touch/gestos.</p>
                    </li>
                </ul>
                <div class="text-center mt-4">
                    <a href="#" class="text-sm text-highlight-orange hover:text-neon-light transition">Ver todas as extensões &rarr;</a>
                </div>
            </div>

             <!-- Mensagem de Instalação (Caixa de Diálogo Customizada) -->
             <div id="install-message-box" class="fixed inset-0 bg-black/70 hidden justify-center items-center z-50">
                <div class="bg-dark-bg p-6 rounded-lg neon-border-blue neon-shadow-blue max-w-sm w-full">
                    <h4 class="text-2xl font-rajdhani font-bold text-neon-light mb-4">Instalação Iniciada</h4>
                    <p class="text-white mb-6">
                        A instalação da extensão '<span id="msg-ext-name" class="font-bold text-highlight-orange">Blur my Shell</span>' foi solicitada. Você será redirecionado para a página de instalação (Mockup).
                    </p>
                    <button class="px-4 py-2 bg-neon-blue text-darkest-bg font-bold rounded-md hover:bg-neon-light transition" onclick="document.getElementById('install-message-box').classList.add('hidden')">
                        Entendido
                    </button>
                </div>
            </div>

        </section>

    </main>

    <script>
        // --- Mock Data das Extensões ---
        const extensionData = {
            "alphabetical_app_grid": {
                title: "Alphabetical App Grid",
                description: "Organiza o grid de aplicativos na visão de atividades em ordem alfabética, facilitando a busca. Essencial para quem tem muitos aplicativos instalados.",
                version: "V1.0.8",
                lastUpdate: "01 de Setembro, 2025",
                compatibility: "Gnome 40+",
                author: "Jonas K.",
                downloadLink: "mock_install_link_1",
                rating: 4.5,
                similar: ["Dash to Panel", "Switcher", "User Themes"]
            },
            "blur_my_shell": {
                title: "Blur my Shell",
                description: "Aplica um efeito de desfoque (blur) no painel superior do Gnome, na visão de atividades e no dash, seguindo o estilo visual moderno. Altamente personalizável para performance.",
                version: "V1.2.5",
                lastUpdate: "15 de Outubro, 2025",
                compatibility: "Gnome 42, 43, 44, 45",
                author: "Ariel B.",
                downloadLink: "mock_install_link_2",
                rating: 4.8,
                similar: ["User Themes", "Dash to Panel", "Tactile"]
            },
            "caffeine": {
                title: "Caffeine",
                description: "Impede que a tela seja bloqueada ou que o sistema entre em suspensão, útil para apresentações ou downloads longos. Ativado com um clique no ícone da bandeja.",
                version: "V35",
                lastUpdate: "20 de Julho, 2025",
                compatibility: "Gnome 38+",
                author: "Federico M.",
                downloadLink: "mock_install_link_3",
                rating: 4.9,
                similar: ["Tactile", "GSConnect", "Switcher"]
            },
            "dash_to_panel": {
                title: "Dash to Panel",
                description: "Transforma a Dock e o Painel Superior do Gnome em uma única barra de tarefas tradicional, otimizando o espaço e a usabilidade.",
                version: "V58",
                lastUpdate: "05 de Outubro, 2025",
                compatibility: "Gnome 45",
                author: "Jonas K.",
                downloadLink: "mock_install_link_4",
                rating: 4.7,
                similar: ["Blur my Shell", "User Themes", "Alphabetical App Grid"]
            },
            "gsconnect": {
                title: "GSConnect",
                description: "Integra o seu dispositivo Android com o desktop Gnome usando o protocolo KDE Connect. Permite notificações, compartilhamento de arquivos e controle de mídia.",
                version: "V54",
                lastUpdate: "10 de Outubro, 2025",
                compatibility: "Gnome 40+",
                author: "Andy G.",
                downloadLink: "mock_install_link_5",
                rating: 4.6,
                similar: ["Switcher", "Caffeine"]
            },
            "switcher": {
                title: "Switcher",
                description: "Melhora o alternador de janelas padrão do Gnome, adicionando visualizações maiores e um painel de controle aprimorado.",
                version: "V1.8",
                lastUpdate: "28 de Setembro, 2025",
                compatibility: "Gnome 44+",
                author: "Alex C.",
                downloadLink: "mock_install_link_6",
                rating: 4.4,
                similar: ["Dash to Panel", "GSConnect", "Tactile"]
            },
            "tactile": {
                title: "Tactile",
                description: "Extensão de organização de janelas (tiling) que permite o encaixe rápido de janelas em layouts predefinidos, ideal para multitarefas.",
                version: "V2.1.0",
                lastUpdate: "03 de Outubro, 2025",
                compatibility: "Gnome 43+",
                author: "Ryan M.",
                downloadLink: "mock_install_link_7",
                rating: 4.5,
                similar: ["Blur my Shell", "Caffeine"]
            },
            "user_themes": {
                title: "User Themes",
                description: "Permite que os usuários ativem e gerenciem temas de shell instalados em seus diretórios locais, abrindo o potencial de personalização total do Gnome.",
                version: "V53",
                lastUpdate: "25 de Agosto, 2025",
                compatibility: "Gnome 3.38+",
                author: "Andrew W.",
                downloadLink: "mock_install_link_8",
                rating: 4.9,
                similar: ["Dash to Panel", "Blur my Shell"]
            },
        };

        // --- Funções de Lógica ---

        /**
         * Extrai o parâmetro 'id' da URL.
         * @returns {string} O ID da extensão, ou 'blur_my_shell' como fallback.
         */
        function getExtensionIdFromUrl() {
            const params = new URLSearchParams(window.location.search);
            let id = params.get('id');
            // Sanitiza o ID para evitar erros e usa um fallback se for nulo ou inválido
            if (!id || !extensionData[id.toLowerCase().replace(/ /g, '_')]) {
                return 'blur_my_shell';
            }
            return id.toLowerCase().replace(/ /g, '_');
        }

        /**
         * Carrega e renderiza os detalhes da extensão.
         * @param {string} id O ID da extensão a ser carregada.
         */
        function loadExtensionDetails(id) {
            const extId = id || getExtensionIdFromUrl();
            const data = extensionData[extId];

            if (!data) {
                console.error("Extensão não encontrada:", extId);
                // Renderizar uma mensagem de erro simples
                document.getElementById('extension-title').textContent = "Extensão Não Encontrada";
                document.getElementById('extension-summary').textContent = "Parece que o ID da extensão na URL está incorreto.";
                document.getElementById('install-button').classList.add('hidden');
                document.getElementById('similar-extensions').classList.add('hidden');
                return;
            }

            // 1. Atualiza Detalhes Principais
            document.getElementById('extension-title').textContent = data.title;
            document.getElementById('extension-summary').textContent = data.description;
            document.getElementById('info-version').textContent = data.version;
            document.getElementById('info-update').textContent = data.lastUpdate;
            document.getElementById('info-compat').textContent = data.compatibility;
            document.getElementById('info-author').textContent = data.author;
            document.getElementById('info-rating').textContent = `${data.rating.toFixed(1)} / 5.0`;
            document.getElementById('msg-ext-name').textContent = data.title; // Para o modal

            // 2. Atualiza Extensões Similares
            const similarList = document.getElementById('similar-list');
            similarList.innerHTML = ''; // Limpa a lista existente

            data.similar.forEach(similarTitle => {
                const similarId = similarTitle.toLowerCase().replace(/ /g, '_');
                const similarData = extensionData[similarId];
                if (similarData) {
                    const listItem = document.createElement('li');
                    listItem.className = 'p-3 bg-darkest-bg rounded-lg hover:bg-neon-blue/10 transition neon-border-blue/20 cursor-pointer';
                    // Atualiza a URL sem recarregar a página
                    listItem.setAttribute('onclick', `updateUrlAndLoad('${similarId}')`); 
                    
                    listItem.innerHTML = `
                        <a href="?id=${similarId}" class="font-bold text-neon-light hover:text-white">${similarData.title}</a>
                        <p class="text-sm text-gray-400">${similarData.description.substring(0, 70)}...</p>
                    `;
                    similarList.appendChild(listItem);
                }
            });

            // Oculta o botão se não houver extensões similares (mockup)
            if (data.similar.length === 0) {
                document.getElementById('similar-extensions').querySelector('h3').textContent = "Nenhuma Extensão Similar Encontrada";
            }
        }

        /**
         * Mostra a caixa de diálogo customizada para a instalação.
         */
        function showInstallationMessage() {
            const msgBox = document.getElementById('install-message-box');
            msgBox.classList.remove('hidden');
            msgBox.classList.add('flex');
            
            // Simula um link de download (URL de mock)
            const extId = getExtensionIdFromUrl();
            const data = extensionData[extId];
            console.log(`Simulando download para: ${data.title} (${data.downloadLink})`);
        }

        /**
         * Atualiza o estado da URL e carrega os detalhes da nova extensão
         */
        function updateUrlAndLoad(newId) {
            if (window.history.pushState) {
                const newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + `?id=${newId}`;
                window.history.pushState({ path: newurl }, '', newurl);
            }
            loadExtensionDetails(newId);
        }

        // --- Inicialização ---
        window.onload = () => {
            loadExtensionDetails();

            // Adiciona um listener para o evento popstate para permitir a navegação de volta pelo histórico do navegador
            window.addEventListener('popstate', () => {
                loadExtensionDetails();
            });
        };
    </script>
</body>
</html>